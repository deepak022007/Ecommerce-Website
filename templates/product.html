<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DENAN | Product</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root { --bg: #050505; --text: #e0e0e0; --accent: #ff2a2a; }
        body { background: var(--bg); color: var(--text); font-family: 'Inter', sans-serif; display: flex; height: 100vh; overflow: hidden; margin:0; }
        nav { position: fixed; top: 0; width: 100%; padding: 2rem 4rem; display: flex; justify-content: space-between; align-items: center; z-index: 100; mix-blend-mode: exclusion; }
        .logo { font-family: 'Cinzel', serif; font-weight: 700; color: white; font-size: 1.5rem; }
        .back-link { color: white; text-decoration: none; border: 1px solid rgba(255,255,255,0.3); padding: 0.5rem 1rem; text-transform: uppercase; font-size: 0.7rem; transition: 0.3s; }
        .back-link:hover { background: white; color: black; }
        .visual { width: 50%; background: #111; height: 100%; }
        .visual img { width: 100%; height: 100%; object-fit: cover; opacity: 0; animation: fadeIn 1.5s ease forwards; }
        .details { width: 50%; padding: 6rem; display: flex; flex-direction: column; justify-content: center; border-left: 1px solid rgba(255,255,255,0.1); }
        h1 { font-family: 'Cinzel', serif; font-size: 3.5rem; margin-bottom: 1rem; }
        .price { font-size: 1.5rem; color: #888; margin-bottom: 2rem; }
        .btn-add { background: transparent; border: 1px solid #333; color: white; padding: 1.5rem 3rem; text-transform: uppercase; letter-spacing: 0.2em; cursor: pointer; transition: 0.3s; width: fit-content; }
        .btn-add:hover { border-color: var(--accent); background: rgba(255,42,42,0.1); }
        .toast { position: fixed; bottom: 2rem; right: 2rem; background: var(--accent); color: white; padding: 1rem 2rem; text-transform: uppercase; font-size: 0.8rem; transform: translateY(100px); transition: 0.4s; }
        .toast.show { transform: translateY(0); }
        @keyframes fadeIn { to { opacity: 1; } }
        @media(max-width:900px){ body { flex-direction: column; height: auto; overflow: auto; } .visual, .details { width: 100%; } .visual { height: 50vh; } .details { padding: 2rem; } }
    </style>
</head>
<body>
    <nav>
        <div style="display:flex; align-items:center; gap:2rem;">
            <a href="/" class="back-link">← Back</a>
            <div class="logo">DENAN</div>
        </div>
        <a href="/cart" style="color:white; text-decoration:none;">Cart (<span id="cart-count">0</span>)</a>
    </nav>

    <div class="visual"><img id="p-img" src=""></div>
    <div class="details">
        <h1 id="p-name">Loading...</h1>
        <div class="price" id="p-price">---</div>
        <p style="color:#aaa; line-height:1.6; margin-bottom:4rem;">Engineered for velocity. Premium materials meet automotive design philosophy.</p>
        <button class="btn-add">Add to Cart</button>
    </div>
    <div id="toast" class="toast">Item Added</div>

    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const pid = urlParams.get('id');

        fetch(`/api/product/${pid}`)
            .then(res => res.json())
            .then(product => {
                if(product) {
                    document.getElementById('p-img').src = product.img;
                    document.getElementById('p-name').innerText = product.name;
                    document.getElementById('p-price').innerText = "₹" + product.price.toLocaleString();
                    
                    document.querySelector('.btn-add').onclick = () => {
                        let cart = JSON.parse(localStorage.getItem('denanCart')) || [];
                        cart.push(product);
                        localStorage.setItem('denanCart', JSON.stringify(cart));
                        document.getElementById('cart-count').innerText = cart.length;
                        const toast = document.getElementById('toast');
                        toast.classList.add('show');
                        setTimeout(() => toast.classList.remove('show'), 3000);
                    };
                }
            });

        const cart = JSON.parse(localStorage.getItem('denanCart')) || [];
        document.getElementById('cart-count').innerText = cart.length;
    </script>
</body>
</html>